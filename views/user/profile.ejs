<%- include('../components/navbar') %>
<div class="text-center"><%- include('../components/messages') %></div>
<div class="container card bg-light shadow my-4">
  <form
    id="profileForm"
    action="/user/<%=profile._id%>?_method=PUT"
    method="POST"
    enctype="multipart/form-data"
    class="row justify-content-center align-items-center"
  >
    <div class="col-sm-10 col-md-8 col-lg-9">
      <h4 class="card-title pt-4"><%= profile.username%></h4>
      <div>
        <p class="text-muted mb-0">Email</p>
        <h4 class="card-title text-lowercase"><%= profile.email%></h4>
      </div>
      <fieldset>
        <div class="form-group">
          <label for="forflat">Address line 1</label>
          <input
            type="name"
            name="flat"
            class="form-control"
            id="forflat"
            placeholder="Enter Address line 1, Flat/Building"
            value="<%= typeof profile.address.flat != 'undefined' ? profile.address.flat : '' %>"
          />
        </div>
        <div class="form-group">
          <label for="forstreet">Address line 2</label>
          <input
            type="name"
            name="street"
            class="form-control"
            id="forstreet"
            placeholder="Enter Address line 2, Street"
            value="<%= typeof profile.address.street != 'undefined' ? profile.address.street : '' %>"
          />
        </div>
      </fieldset>
      <% if (profile.id === user.id) { %>
      <input
        type="button"
        class="mb-3 mr-2 btn btn-outline-warning hidden"
        id="editProfile"
        value="Edit Profile"
      />
      <input
        type="submit"
        class="mb-3 mr-2 btn btn-outline-success"
        id="submitProfile"
        value="Save Profile"
      />
      <input
        type="button"
        class="mb-3 mr-2 btn btn-outline-danger"
        id="deletebutton"
        data-toggle="modal"
        data-target="#modalCenter"
        value="Delete Profile"
      />
      <% } %>
    </div>
  </form>
</div>

<div
  class="modal fade"
  id="modalCenter"
  tabindex="-1"
  role="dialog"
  aria-labelledby="modalTitle"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalTitle">
          Do you really want to Delete your account
        </h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-outline-secondary"
          data-dismiss="modal"
        >
          Not now
        </button>
        <form
          class="float-right"
          action="/user/<%=user._id%>?_method=DELETE"
          method="POST"
        >
          <button type="submit" class="btn btn-outline-danger">Yes</button>
        </form>
      </div>
    </div>
  </div>
</div>
